@model IEnumerable<CinemaApp.Models.HeroSlide>

@{
    ViewData["Title"] = "–°–ª–∞–π–¥—ã –≥–ª–∞–≤–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã";
}

<div class="admin-page__header">
    <div class="admin-page__heading">
        <h1 class="mb-0">–°–ª–∞–π–¥—ã –≥–ª–∞–≤–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã</h1>
        <p class="admin-page__subtitle">–£–ø—Ä–∞–≤–ª—è–π—Ç–µ –≥–µ—Ä–æ-—Å–ª–∞–π–¥–µ—Ä–æ–º: –¥–æ–±–∞–≤–ª—è–π—Ç–µ –Ω–æ–≤—ã–µ –ø—Ä–æ–º–æ-–±–ª–æ–∫–∏, –º–µ–Ω—è–π—Ç–µ –ø–æ—Ä—è–¥–æ–∫ –∏ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å.</p>
    </div>
    <a class="btn btn-primary" asp-action="CreateHeroSlide">
        <i class="bi bi-plus-lg me-2"></i>–î–æ–±–∞–≤–∏—Ç—å —Å–ª–∞–π–¥
    </a>
</div>

@if (!Model.Any())
{
    <div class="admin-empty text-center">
        <div class="admin-empty__icon">üé¨</div>
        <h4 class="mb-2">–ù–µ—Ç —Å–ª–∞–π–¥–æ–≤</h4>
        <p class="admin-empty__text">–î–æ–±–∞–≤—å—Ç–µ –ø–µ—Ä–≤—ã–π —Å–ª–∞–π–¥, —á—Ç–æ–±—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ —É–≤–∏–¥–µ–ª–∏ –∞–∫—Ç—É–∞–ª—å–Ω—ã–µ –ø—Ä–æ–º–æ-–±–ª–æ–∫–∏ –Ω–∞ –≥–ª–∞–≤–Ω–æ–π.</p>
        <a class="btn btn-primary mt-3" asp-action="CreateHeroSlide">
            <i class="bi bi-plus-lg me-2"></i>–°–æ–∑–¥–∞—Ç—å —Å–ª–∞–π–¥
        </a>
    </div>
}
else
{
    <div class="admin-table__wrapper">
        <table class="admin-table">
            <thead>
                <tr>
                    <th style="width: 70px;">#</th>
                    <th>–ù–∞–∑–≤–∞–Ω–∏–µ</th>
                    <th>–ü–æ–¥–∑–∞–≥–æ–ª–æ–≤–æ–∫</th>
                    <th>–§–∏–ª—å–º</th>
                    <th>–í–∏–¥–µ–æ</th>
                    <th>–ü–æ—Ä—è–¥–æ–∫</th>
                    <th>–°—Ç–∞—Ç—É—Å</th>
                    <th class="text-end">–î–µ–π—Å—Ç–≤–∏—è</th>
                </tr>
            </thead>
            <tbody>
                @{
                    var index = 1;
                }
                @foreach (var slide in Model)
                {
                    <tr>
                        <td>@index</td>
                        <td>
                            <div class="admin-table__title">
                                <span>@(string.IsNullOrWhiteSpace(slide.Title) ? slide.Movie?.Title ?? "–ë–µ–∑ –Ω–∞–∑–≤–∞–Ω–∏—è" : slide.Title)</span>
                                @if (!string.IsNullOrWhiteSpace(slide.Description))
                                {
                                    <span class="admin-table__meta admin-table__meta--truncate">@slide.Description</span>
                                }
                            </div>
                        </td>
                        <td>
                            <span class="admin-badge">
                                <i class="bi bi-megaphone"></i>
                                @(string.IsNullOrWhiteSpace(slide.Tagline) ? "‚Äî" : slide.Tagline)
                            </span>
                        </td>
                        <td>
                            <div class="admin-table__title">
                                <span>@(slide.Movie?.Title ?? "‚Äî")</span>
                                @if (slide.MovieId.HasValue)
                                {
                                    <span class="admin-table__meta">ID —Ñ–∏–ª—å–º–∞: @slide.MovieId</span>
                                }
                            </div>
                        </td>
                        <td>
                            @if (!string.IsNullOrWhiteSpace(slide.VideoPath))
                            {
                                <span class="admin-badge admin-badge--positive">
                                    <i class="bi bi-play-circle-fill"></i>
                                    @slide.VideoPath
                                </span>
                            }
                            else if (!string.IsNullOrWhiteSpace(slide.Movie?.TrailerUrl))
                            {
                                <span class="admin-badge">
                                    <i class="bi bi-collection-play"></i>
                                    –¢—Ä–µ–π–ª–µ—Ä —Ñ–∏–ª—å–º–∞
                                </span>
                            }
                            else
                            {
                                <span class="admin-badge admin-badge--negative">
                                    <i class="bi bi-slash-circle"></i>
                                    –ë–µ–∑ –≤–∏–¥–µ–æ
                                </span>
                            }
                        </td>
                        <td>
                            <span class="admin-badge">
                                <i class="bi bi-list-ol"></i>
                                @slide.DisplayOrder
                            </span>
                        </td>
                        <td>
                            <span class="admin-status @(slide.IsActive ? "admin-status--active" : "admin-status--inactive")">
                                <i class="bi @(slide.IsActive ? "bi-check-circle-fill" : "bi-pause-circle")"></i>
                                @(slide.IsActive ? "–ê–∫—Ç–∏–≤–µ–Ω" : "–í—ã–∫–ª.")
                            </span>
                        </td>
                        <td class="text-end">
                            <div class="admin-table__actions">
                                <a class="btn btn-outline-warning btn-sm" asp-action="EditHeroSlide" asp-route-id="@slide.Id">
                                    <i class="bi bi-pencil-square me-1"></i>–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å
                                </a>
                                <form asp-action="DeleteHeroSlide" asp-route-id="@slide.Id" method="post" class="d-inline" onsubmit="return confirm('–£–¥–∞–ª–∏—Ç—å —ç—Ç–æ—Ç —Å–ª–∞–π–¥?');">
                                    <button type="submit" class="btn btn-outline-danger btn-sm">
                                        <i class="bi bi-trash3 me-1"></i>–£–¥–∞–ª–∏—Ç—å
                                    </button>
                                </form>
                            </div>
                        </td>
                    </tr>
                    index++;
                }
            </tbody>
        </table>
    </div>
}


